"use strict";(self.webpackChunkng_thingsboard=self.webpackChunkng_thingsboard||[]).push([[285],{285:(b,l,n)=>{n.r(l),n.d(l,{RegistrationModule:()=>q});var u=n(8583),c=n(4655),o=n(3679);class p{static passwordMatchValidator(e){e.get("password").value!==e.get("confirmPassword").value&&e.get("confirmPassword").setErrors({NoPassswordMatch:!0})}static privacyPolicyCheckedValidator(e){return void 0!==e.value&&!1===e.value?{PrivacyPolicyNotAccepted:!0}:null}}var t=n(7716),f=n(7990),h=n(7001),s=n(3738),Z=n(1095),g=n(5618),d=n(8295),P=n(9983),C=n(6627),M=n(7539),v=n(2178);function y(a,e){1&a&&(t.TgZ(0,"mat-hint"),t._uU(1,"Passwords don't match"),t.qZA())}function x(a,e){if(1&a){const r=t.EpF();t.TgZ(0,"form",5),t.NdJ("ngSubmit",function(){return t.CHM(r),t.oxw().register()}),t.TgZ(1,"div",6),t.TgZ(2,"div",7),t.TgZ(3,"mat-form-field",8),t.TgZ(4,"mat-label"),t._uU(5,"First name"),t.qZA(),t._UZ(6,"input",9),t.qZA(),t.qZA(),t.TgZ(7,"div",7),t.TgZ(8,"mat-form-field",8),t.TgZ(9,"mat-label"),t._uU(10,"Last name"),t.qZA(),t._UZ(11,"input",10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"mat-form-field",8),t.TgZ(13,"mat-label"),t._uU(14,"Email"),t.qZA(),t.TgZ(15,"mat-icon",11),t._uU(16,"mail"),t.qZA(),t._UZ(17,"input",12),t.qZA(),t.TgZ(18,"mat-form-field",8),t.TgZ(19,"mat-label"),t._uU(20,"Password"),t.qZA(),t.TgZ(21,"mat-icon",11),t._uU(22,"lock"),t.qZA(),t._UZ(23,"input",13),t.qZA(),t.TgZ(24,"mat-form-field",8),t.TgZ(25,"mat-label"),t._uU(26,"Repeat password"),t.qZA(),t.TgZ(27,"mat-icon",11),t._uU(28,"lock"),t.qZA(),t._UZ(29,"input",14),t.YNc(30,y,2,0,"mat-hint",15),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"mat-checkbox",17),t._uU(33," Accept "),t.TgZ(34,"a",18),t._uU(35,"Privacy Policy"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"button",19),t._uU(37,"Sign up"),t.qZA(),t.qZA()}if(2&a){const r=t.oxw();t.Q6J("formGroup",r.registrationForm),t.xp6(30),t.Q6J("ngIf",r.passwordMatch),t.xp6(6),t.Q6J("disabled",!r.registrationForm.valid)}}function A(a,e){1&a&&t._UZ(0,"mat-progress-bar",20)}const O=[{path:"",component:(()=>{class a{constructor(r,i,m,w){this.formBuilder=r,this.authService=i,this.router=m,this.matSnackBar=w,this.hidePassword=!0,this.isLoading=!1}ngOnInit(){this.registrationForm=this.createForm()}createForm(){return this.registrationForm=this.formBuilder.group({firstName:["",o.kI.compose([o.kI.required,o.kI.minLength(4)])],lastName:["",o.kI.compose([o.kI.required,o.kI.minLength(4)])],email:["",o.kI.compose([o.kI.required,o.kI.email])],password:["",o.kI.compose([o.kI.required,o.kI.minLength(6)])],confirmPassword:["",o.kI.compose([o.kI.required,o.kI.minLength(6)])],recaptchaResponse:["ToDo",o.kI.compose([o.kI.required])],acceptPrivacyPolicy:["",o.kI.compose([o.kI.required,p.privacyPolicyCheckedValidator])]},{validator:p.passwordMatchValidator})}get passwordMatch(){return!!this.registrationForm.get("confirmPassword").errors&&this.registrationForm.get("confirmPassword").errors.NoPassswordMatch}register(){this.isLoading=!0;const r=Object.assign({},this.registrationForm.value);this.authService.register({firstName:r.firstName,lastName:r.lastName,email:r.email,password:r.password,recaptchaResponse:r.recaptchaResponse}).then(()=>{this.authService.login({username:r.email,password:r.password}).then(()=>{this.isLoading=!1,this.router.navigateByUrl("/home")}).catch(m=>{this.isLoading=!1,this.matSnackBar.open(m.message,"Close",{duration:1e4,horizontalPosition:"end",verticalPosition:"top"})})}).catch(m=>{this.isLoading=!1,this.matSnackBar.open(m.message,"Close",{duration:1e4,horizontalPosition:"end",verticalPosition:"top"})})}}return a.\u0275fac=function(r){return new(r||a)(t.Y36(o.qu),t.Y36(f.e),t.Y36(c.F0),t.Y36(h.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-registration"]],decls:17,vars:2,consts:[["id","registration-form"],["mat-card-image","","src","/assets/thingsboard-logo.svg","alt","Logo"],[3,"formGroup","ngSubmit",4,"ngIf"],["mat-raised-button","","routerLink","/login"],["color","primary","mode","indeterminate",4,"ngIf"],[3,"formGroup","ngSubmit"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","center","fxLayoutGap","10px"],["fxFlex","50%"],["appearance","outline"],["matInput","","formControlName","firstName","placeholder","Enter your first name","name","firstName","required",""],["matInput","","formControlName","lastName","placeholder","Enter your last name","name","lastName","required",""],["matPrefix",""],["matInput","","formControlName","email","placeholder","Enter your email","name","username","required",""],["matInput","","formControlName","password","placeholder","Create a password","type","password","name","password","required",""],["matInput","","formControlName","confirmPassword","placeholder","Repeat your password","type","password","name","password","required",""],[4,"ngIf"],[1,"mat-checkbox"],["formControlName","acceptPrivacyPolicy"],["routerLink","/privacy-policy"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","primary","mode","indeterminate"]],template:function(r,i){1&r&&(t.TgZ(0,"section",0),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-header"),t.TgZ(3,"mat-card-title"),t._UZ(4,"img",1),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6," Create your personal account on the live demo server."),t._UZ(7,"br"),t._uU(8," It is totally free! "),t.qZA(),t.qZA(),t.TgZ(9,"mat-card-content"),t.YNc(10,x,38,3,"form",2),t.qZA(),t.TgZ(11,"mat-card-actions"),t.TgZ(12,"span"),t._uU(13,"Already have an account?"),t.qZA(),t.TgZ(14,"button",3),t._uU(15,"Login!"),t.qZA(),t.YNc(16,A,1,0,"mat-progress-bar",4),t.qZA(),t.qZA(),t.qZA()),2&r&&(t.xp6(10),t.Q6J("ngIf",i.registrationForm),t.xp6(6),t.Q6J("ngIf",i.isLoading))},directives:[s.a8,s.dk,s.n5,s.G2,s.$j,s.dn,u.O5,s.hq,Z.lW,c.rH,o._Y,o.JL,o.sg,g.xw,g.Wh,g.SQ,g.yH,d.KE,d.hX,P.Nt,o.Fj,o.JJ,o.u,o.Q7,C.Hw,d.qo,M.oG,c.yS,d.bx,v.pW],styles:["#registration-form[_ngcontent-%COMP%]{padding-left:10%;padding-right:10%}#registration-form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{max-width:500px;margin:50px auto;padding:25px}#registration-form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding-top:10px}#registration-form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   .mat-card-image[_ngcontent-%COMP%]{width:0 auto;height:60px}#registration-form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{margin-bottom:25px}#registration-form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:5px}#registration-form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .mat-checkbox[_ngcontent-%COMP%]{margin-bottom:40px}#registration-form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%;margin:0 25%}#registration-form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{text-align:center;margin-top:10px}#registration-form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{margin:15px 0}"]}),a})(),pathMatch:"full"}];let T=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[c.Bz.forChild(O)],c.Bz]}),a})();var I=n(190);let q=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[u.ez,T,I.m]]}),a})()}}]);